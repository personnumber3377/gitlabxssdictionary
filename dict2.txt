""
"properly detects limits"
"includes data-lang-params tag with extra information and removes data-meta"
"<p><code>2+2</code></p>"
"/something/cool"
"$`1+\$2`$"
"detects valid escaped reference"
"searches for attributes only once"
"when it has only one attachment to replace"
"adds `js-render-mermaid` class to the `code` tag"
"does nothing"
"38008cb17ce1466d8fec2dfa6f6ab8dcfe5cf49e"
"absolute group reference"
"Banzai::Filter::Concerns::PipelineTimingCheck::MAX_PIPELINE_SECONDS"
"ignores invalid merge IDs on the referenced project"
"ignores data-src and uses image path as the link text"
""[^1]\n[^1]:\n" * 100000"
"foo"bar.png"
"<img class="plantuml" src="http://localhost:8080/png/U9npoazIqBLJ24uiIbImKl18pSd9vr9Ny4kjA578oSnBLSX9JIjHoCmhISqhoSpFIyp9gLH8oadCozRZ0W0Q7XD1" data-diagram="plantuml" data-diagram-src="data:text/plain;base64,Qm9iIC0+IFNhcmEgOiBIZWxsbwonIE5leHQgbGluZSBsZWZ0IGludGVudGlvbmFsbHkgYmxhbmsuCg==">"
"rgb(101%,0%,0%)"
"does not support references by IID"
"supports mentioning a project"
"does not convert a relative url into absolute"
"returns groups"
"when checking N+1"
"correctly parses"
"detects action in paragraph"
"autolinks smb"
"<p><math>1+\#2</math></p>"
"joins the url without doubling the path"
"when the cache is loaded with absolute references"
":play_pause: "
"`[[link-in-backticks]]`"
"preserves user-content- prefixed ids on anchors"
"renders correct html"
"ignores invalid feature flag IDs on the referenced project"
"not readable"
"data-original"
"<pre><code>one</code> and <code>two</code></pre>"
"[TOC] as tag"
"gfm gfm-alert has-tooltip"
"renders original source when missing document node"
"a"
"when referencing both group and subgroup milestones using absolute references"
"returns the usernames mentioned in a document"
"/cool"
"when header text contains escaped content"
"#references_per_parent"
"using an existing group ID"
"works with utf8 chars in language"
"data-group"
"data-milestone"
"A "very" good file.png"
"replaces the name of the user"
"with data-issue"
"ignores open merge request references"
"returns the projects mentioned in a document"
"using a non-existing merge request ID"
"rgb(0,0,0, .0)"
"data-issue-type"
"invalid_json.json"
"::include{file=file.md}"
"Custom name"
"span.gfm.gfm-commit"
"<img src="example.jpg" width="100" height="200px">"
"when size attributes are invalid"
"rgb(0,0,0, 0.0)"
"filters out banned tags"
"creates a reference for a regular user for a public snippet"
"renders PlanUML"
"the reference is invalid"
"doc/update/7.14-to-8.0.md"
"<code>[[link-in-backticks]]</code>"
"Êó•..."
"when the link has a data-alert attribute"
"work in all other contexts, including URLs and link titles, link references, and info strings in fenced code blocks"
"maintains rel license"
"with https"
"ignores invalid snippet IDs on the referenced project"
"xss &amp;lt;img onerror=alert(1) src=x&amp;gt;"
"cross-namespace"
"links to a valid reference for complete cross-reference"
"#this-header-is-poorly-formatted"
"does not remove those characters from anywhere else in the text"
"#redact_nodes"
"<img src="example.jpg"> {width=100}"
"allows `details` elements"
"rebuilds relative URL for a file in the repo with leading ./"
"</gl-emoji> :play_pause: "
"design"
"when current user is set"
"rel"
"#1 2 3"
"uses the proxied url"
"href"
"nonexistent/project"
"<p><a href="smb:///Volumes/shared/foo.pdf">smb:///Volumes/shared/foo.pdf</a></p>"
"img%20test.jpg"
":eagle: Some issue"
"replaces the username of the user"
"adds data-canonical-lang to `pre` and removes lang attribute"
"stores filtered new nodes"
"does not link users using @all reference"
"#{user.id}"
"data-work-item"
"supports absolute reference"
"returns false when nodes are not loaded"
"when group name has HTML entities"
"$$22+1$$ and $$22 + a^2$$"
"does not replace this reference with a link"
"expands when emoji is embedded at the beginning of a string"
"does not add a project when the data-commit-range attribute is empty"
"sanitizes `id` attribute on any element"
"with a data-project attribute"
"emoji filter"
"http://www.example.com"
"This text contains no links to autolink"
"replaces placeholder with empty string"
"http://example...</a>"
"links to a valid reference for url cross-namespace"
"truncates long title for references with +"
"http://localhost:8080/png/U9npA2v9B2efpStXSifFKj2rKmXEB4fKi5BmICt9oUToICrB0Se10EdD34a0"
"data-user"
"when given HTML is not safe"
"allows id property on anchor links"
"preserves content inside tt tags"
"returns the default project if no associated project was found"
"<p><a id="cross-references"></a>A link to another location within an AsciiDoc document.</p>"
"ignores issuable links with empty content"
"<h1"
"when no language is specified"
"when group level work item URL reference"
"uses image data-src as a link text"
"converts arbitrary front matter to a fenced code block"
"$x$"
"does not replaces the link"
"text-align: center"
"invalid/reference"
"String-based single-word references"
"valid repository"
"reference parsing"
"has-tooltip"
"data-reference-format"
".identifier"
"lazy"
"doc/api/"
"http://example.com/image.jpg"
"rebuilds relative URL for a link"
"::include{file.md}"
"returns an Enumerator when no block is given"
"allows for `encoding:` before the front matter"
"contains a link to the issue"
"with project reference"
"links to the nested group"
"when the link does not have a data-group attribute"
"::include{file=http://example.com}"
"footnotes"
"disables data-sourcepos"
"autolinks any scheme"
"html/pipeline"
"node"
"Foo</h1>"
"/diffs#note_123"
"js-render-suggestion"
"autolinks when using commit_description pipeline"
"grinning"
"<p dir="auto">This is &lt;script&gt;alert(0)&lt;/script&gt; <a href"
"#d2d2d2"
"finds the label with relative reference"
"without a commit (only ref)"
"allows the footnote attributes"
"includes a style attribute"
", "
"can parse the reference"
"üíØ"
"when links are rewritable"
"#load_reference_cache"
"[[link-in-backticks]]"
"ignores invalid alert IDs on the referenced project"
"if relative_url_root is set"
"allows at most N blob includes"
"returns a Hash containing the work items for a list of nodes"
"creates a reference for a regular user for an internal snippet"
"See aaa/bbb~ccc"
"separated with a comma"
"rgba(0%,0%,0%,0%)"
"preserves content inside pre tags"
"with an absolute URL"
"<a href="foo" class="gfm">foo</a>"
"multiple trailers in the same message"
"PipelineTest"
".[]"
"returns the group from context"
"returns an Array of snippets"
"returns the expected type"
"[[a|http:\"
"I steal cookies"
"links to valid references"
"test.jpg"
"for links that look malicious"
"ignores invalid IDs on the referenced label"
"[{"key":"starts_at"},{"key":"url"}]"
"ftp://ftp.us.debian.org/debian/"
"rgb(0,0,0,1.0)"
"truncates the first line of a code block"
"using an existing milestone ID"
"bug"
"raise error for unrecognized engines"
"This header has spaces in it"
"when referenced project does not exist"
"<pre><code lang="ruby">def fun end</code></pre>"
"defaults to the install domain"
"returns nil when no cache_key"
"when the file does not exist"
"handles case where the include filename is nil"
"#D2D2D2"
"oigjsie8787%$**(#(%0"
"does detect a multiple quick actions but not in a multi-line blockquote"
"/uploads/e90decf88d8f96fe9e1389afc2e4a91f/test.jpg"
"enables debug_timing output"
"$$2+2$$"
"does not add inline diff span tags when a closing tag is not provided"
"HSL format"
"includes a data-alert attribute"
"whatever"
"..."
"designs"
"<pre data-canonical-lang="ruby"><code>def fun end</code></pre>"
"allows trailing whitespace on blockquote fence lines"
"does not create a reference for a regular user for an internal snippet"
"for non-lowercase scheme links"
"data-canonical-src"
"when allowlist is empty"
"created link text will be equal to the resource text"
">images/image.jpg</a></p>"
"finds label in ancestors"
"replaces the tag with the TableOfContentsTagFilter result"
", ok?"
"with group context"
"removes unpermitted references"
"rebuilds relative URL for link to an image in the repo"
"returns an Array of ExternalIssue instances"
"#one-1"
"using an existing group ID where user does not have access"
"appends state to moved references"
"allows the lang attribute on the code tag to support RST files processed by gitlab-markup gem"
"doc/api/README.md"
"removes references for assignee"
"redacts an array of documents"
"strips any frontmatter"
"$$   2+2  $$"
"produces a valid text"
"Header"
"table headtable content"
"does not convert non-reference/latex punctuation to spans"
"hsl(0,0%,0%,1.)"
"js-render-mermaid"
"prevents user from reading merge request references"
"</gl-emoji> ‚èØ :play_pause:"
"/uploads/a.test"
"autolinks multiple occurrences of smb"
"rgba(0,0,0,1)"
"p"
"<p>test $<code>2+2</code> test</p>"
"$$2+2$$ $22 and flightjs/Flight$22 $$2+2$$"
"[ (]("
"when markdown contains table"
"$1+\$2$"
"when the link does not have a data-author attribute"
"when a reference (such as a label name) is autocompleted with characters that require escaping"
"creates a reference for a project member for a public snippet"
"[[link-text|wiki-slug]]"
"1.500000_s"
"when pattern matches in the middle node"
"ensure we handle all the GitLab reference characters"
"when not xhtml"
"when extended summary props are present"
"#this-header-has-spaces-in-it"
"does not link to patch when extension match is after the path"
"data-merge-request"
"finds group and project by absolute path"
"anchor tag"
"with internal reference"
"appends state to merged merge request references"
"title"
"rewrites the link correctly for subgroup"
"formats correctly"
"escapes HTML tags"
"with data-group"
"li.inapplicable > s"
"autolinked image"
"using an existing feature flag ID"
"when milestone is open"
"when the URI returns 404"
"[[_toc_]] as tag"
"relative path to a file up one directory"
"when an image is detected"
"finds the correct engine"
"a work item reference"
"when the link as a data-commit-range attribute"
"<td>foot <sup"
"ignores image src and does not use it as the link text"
"group label references"
"table of contents tag"
"rgb(0,0,0,1.1)"
"#123456 78"
"supports an :only_path context"
"replaces multiple placeholders in a given text"
".references_in"
"gl-label-text"
"all"
"ignores elements without an href attribute"
"when subclassed from HTML filter"
"does nothing to a short-enough text"
"includes a data-group attribute"
"ignores toc tag when at start of paragraph"
"source: intertubes"
"turns off sourcepos"
"TOC"
"home"
"when group level work item full reference"
"has an `anchor` class"
"<a data-reference-type="issue"></a>"
"when it spans multiple lines"
"<a class="gfm" href="https://www.gitlab.com" data-reference-type="issue">foo</a>"
"<img src="example.jpg" height="200">"
"points to referenced project issues page"
"returns an empty Array when the list of nodes is empty"
"a~bug"
":eagle: Some issue :dog:"
"removes references"
"2 factor authentication"
"#123a"
"Gollum::File"
"hsl(0,0%,0%,1.1)"
"+1 (üëç)"
"#123456aa"
"a_group"
"rewrites images with spaces in url"
"subclassing other types"
"hello"
"<span>span text</span>"
"if only_path is false"
"ignores toc tag when there is another node directly in front"
"using a non-existing group ID"
"#0"
"http://example.com/pdfs/gollum.pdf"
"foo://23423:::asdf"
"rgb(0,0,0)BAR"
"call_filter.html_pipeline"
"$22 and $`2+2`$"
"returns the referenced project"
"does not append state when filter is not enabled"
"avoids N+1 cached queries"
"shared-secret"
"links to merge request list when `label_url_method: :project_merge_requests_url`"
"skips text nodes in inline diff elements"
"when links are not rewritable"
"redacts an issue attached"
"does not support references by link"
"using an existing project ID"
"sample-project"
"a link"
"is always empty if the input is empty"
"data-issue"
"$$x$$"
"http://example.com/foo/bar/baz"
"available placeholders"
"<a class="gfm" href="https://gitlab.com/path/to/project/-/wikis/foo" data-reference-type="wiki_page" data-gollum="true">foo</a>"
" div  h1 "
"this [and] that"
"mentioning @all (when `disable_all_mention` FF is disabled)"
"unsupported pipeline name Foo (Class)"
"includes a data-commit attribute"
"missing.md"
"~"e\*bug\*""
"<span class="k">def</span> <span class="nf">test</span>...</span>"
".nodes?"
"<pre data-sourcepos="&#34;%22 href=&#34;x&#34;></pre><base href=http://unsafe-website.com/><pre x=&#34;"><code></code></pre>"
"not a filter timeout"
"when the link has a data-feature-flag attribute"
"links an internal issues and keep updated nodes in result[:reference_filter_nodes]"
"f/" onerror=alert(1) onload=alert(1) "
"uses passed post process pipeline"
"replaces the email of the user"
"<em>italic</em> and <code>code</code>"
"supports parent group references"
"ignores valid color code with appended space"
"does not have an N+1 query problem with cross projects"
"`$\$1+2$$`"
"for work item references"
"returns a Hash containing attribute values per project"
"<math>"
"leaves reference chars untouched"
"for classes"
"hsla(0,0%,0%,0)"
"rewrites links with anchor"
"emoji in references"
"allows references for author"
"<img src="http://localhost:8000/nomnoml/svg/eNrtzCEOgDAMAEC_V0wysQ9AgkHh8M1EyQosGYw0nSDZ47EInlB74mBJjEKNHppKvaS38yWNMcXODXfKGXfqXDPWwkrIMXgPNzIXCR_rR9hKzfYsVY5gggFttdVWW2211Vbb__YFciTqeA==" hidden="" class="js-render-kroki" data-diagram="nomnoml" data-diagram-src="data:text/plain;base64,W1BpcmF0ZXxleWVDb3VudDog"
"image/jpeg"
"cross-project absolute reference"
"limits header href length with 255 characters"
"name"
"when a project is private and the snippets feature is enabled for project team members"
"[ ] foobar"
"ignores valid color code surrounded by spaces"
"The quick brown fox jumped over the lazy dog"
"renders a label reference"
"when fields are not provided"
"FOOrgb(0,0,0)"
"#parent_per_reference"
"<p>:tanuki:</p> <p>:party-parrot:</p>"
"title="http://xn--example-6p25f.com/""
"#process"
"renders Unresolved directive placeholder"
"http://xn--example-6p25f.com/test.png"
"rgb(0%,0%,0%)"
"Homer"
"rgb(0,0,0)"
"reuses memoized rendered HTML when available"
"./doc/api/README.md"
"when a project is internal and the snippets feature is enabled for project team members"
"#{original_content}"
"#data_attributes_for"
"<a class="gfm" data-reference-type="issue">bar</a>"
"for root links on document"
"üôàüôâüôä"
"does not limit"
"üôà:see_no_evil:üôâ:hear_no_evil:üôä:speak_no_evil:"
"returns the commit range"
"ignores invalid users"
"#12g"
"when internal issue tracker is disabled"
"when markdown contains banned HTML tags"
"<p><a href="https://example.com">https://example.com</a></p>"
"Header 1-1"
"keep the data-canonical-src"
"valid projects"
"returns empty Array"
"with memoization"
"(format nil "~0f" 3.0) ; 3.0"
"SIMPLE.PNG"
"sanitization of HTML entities"
"does not add language to lang attribute when not specified"
"#ABC"
"using a non-existing alert ID"
"returns the path of the current parent"
"://foo"
"removes punctuation"
"does not touch redis if the field is in the cache"
"when work item exists at the group level"
"~"h \`bug\`""
"replaces the instance_id"
"when RequestStore is active"
"can not find the label"
"always uses the short ID as the link text"
"unicode matches at the start of a string"
".//li//input"
"<p>[[<em>toc</em>]]</p>"
"replaces image with a link to the image"
"//example.com/test.png"
"does not creates img tag for invalid URL"
"üëç"
"turns off header anchors"
"cross-project URL in link href"
"produces a valid text in a link"
".reference_type="
"first"
"label"
"#insert_before"
"#12345678"
"removes classes"
"ignores backref emoji in footnote references"
"a reference with issue type information"
"replaces only specific links with original filename in strong"
"#references_relation"
"when the document includes more than asciidoc_max_includes"
"when processing a link to the designs tab"
"ignores valid references when using default tracker"
"escapes RTLO in link text"
"[[this \[and\] that]]"
"queries any additional objects after the first call"
"contains required filters"
"`2+2`"
"loads references grouped per parent paths"
"data-table-filter"
"RGB(0,0,0)"
"does nothing when :no_header_anchors is truthy"
"to a project upload"
"uses the test footnote ID instead of a random number"
"#object_link_filter"
"data-fallback-src"
"with "video" html tag"
"rebuilds URL relative to the directory"
"returns an empty Array when the user is not a team member"
"does not process malicious input"
"link anchors"
"when a project is not specified"
"and src is audio"
"keeps an empty line in place of the encoding"
"when lang is specified on `code`"
"without :post_process_pipeline key"
"[~] foobar"
"Banzai::Filter::MathFilter::RENDER_NODES_LIMIT"
"absolute references"
"to a personal snippet"
"#full_cache_key"
"http://issues.example.com/issues/12"
"data-diagram-src"
"when image alt contains malicious code"
"uses the original content as the link content if given"
"#full_group_path"
"adds rel and target attributes to broken hrefs"
"has tooltips for malicious links"
"non GitLab users"
"ignores valid color code with prepended space"
"paragraph.json"
"mark#\"
"g`bug`"
"when unicode emojis"
"when node has no reference pattern"
"<div><div class="gl-relative markdown-code-block js-markdown-code"><pre class="code highlight js-syntax-highlight language-plaintext" v-pre="true"><code><span id="LC1" class="line" lang="plaintext"></span><span id="LC2" class="line" lang="plaintext">something</span><span id="LC3" class="line" lang="plaintext">else</span></code></pre><copy-code></copy-code><insert-code-snippet></insert-code-snippet></div></div>"
"when GitLab is hosted at a root URL"
"b"
"include syntax"
"returns a Set containing the visible nodes"
"data-namespace-path"
"#nodes"
"_@test\__"
"See <a href=\"http://localhost/cross-namespace/cross-project/-/work_items/1\">Reference</a>"
"does not create a reference for an external user for an internal snippet"
"field_html"
"#anchor-123"
"renders emojis wrapped in <gl-emoji> tag"
"returns an empty Array when the user can not read the issue"
"cross group label references"
"when reference cache is loaded"
"<a href="https://www.gitlab.com">Marge</a>"
""$1$\n" * 190000"
"6.0"
"100%branch"
"returns a Hash grouping objects per node"
"removes spans for non-reference punctuation"
"verifies diagram type to avoid possible XSS"
"$22 and $$2+2$$"
"height and width"
"See g.fm & references?"
"allows correct footnote id property on li element"
"<p><math>1+\_2</math></p>"
""#{reference_link}"
"<pre data-canonical-lang="gnuplot"><code>This is a test</code></pre>"
"enforces limits by default"
"on front matter without content"
"h1 a"
"when a project is internal and the snippets feature is enabled for everyone"
"/uploads/-/system/personal_snippet/6/674e4f07fbf0a7736c3439212896e51a/example.tar.gz"
"rgb(0,0,-0)"
"<p><math>x</math></p>"
"$1/2$ &lt;b&gt;test&lt;/b&gt;"
"class="has-tooltip""
"user reference or project reference"
"hsl(0,0%,0%,-.1)"
"with :post_process_pipeline key"
"source: license"
":y: "
"detects valid footnotes"
"rgb(0,0,0, 0)"
"matches multiple custom emoji"
"ignores valid color code without backticks(code tags)"
"</gl-emoji>‚èØ"
"with an impersonated username"
"includes a data-commit-range attribute"
"something"
"does not link a User"
"wink"
"works with alternative [toc] tag"
"does nothing when limit is unspecified"
"does not wrap a sublist with <s>"
"doc/api/test.md"
"<p><a id="user-content-cross-references"></a>A link to another location within an AsciiDoc document.</p>"
"# 123456"
"~"b\~\~bug\~\~""
"<p "
"Header 2-1b"
"does not have N+1 per multiple project references"
"when table of contents nesting"
"0.500000_s"
"redacts all nodes"
"Gitlab::Git::Blob"
"gfm gfm-label has-tooltip gl-link gl-label-link"
"alternative internal_reference"
"ignores issuable links with custom anchor"
".to_html"
"party-parrot"
"does not rewrite links"
"empty-branch"
"when the link has a data-commit attribute"
"&lt;img src="x" onerror="alert(42)"&gt;"
"[http://example.com/foo bar](http://example.com/foo bar)"
"handles invalid references"
"field"
"with RequestStore enabled"
"generates video html structure"
"Marge"
"code.yaml"
"rewrites non-file links to be at the scope of the wiki root"
"th"
"feature flags"
"gfm gfm-commit_range has-tooltip"
"anchor"
"gfm lazy"
"[{"key":"starts_at","label":"Date \\u003c \\u0026 \\u003e","sortable":true},{"key":"url","label":"URL"}]"
"returns the project associated with a DocumentFragment when using a node"
"ignores invalid commit short_ids on link text"
"unicode matches at the end of a string"
"handles cross project references"
"when using default markdown engine"
"<p data-sourcepos="1:1-1:4">test</p>"
"<p><code>$1+2$</code></p>"
"absolute path"
"ignores them all"
"ignores invalid milestone names and escapes entities"
"replaces supported name emoji"
"has the MR title in the title attribute"
":tanuki: :tanuki:"
"http://example.com/slug%20two"
"http://localhost:3000/"
"does not autolink bad URLs"
"returns an empty Hash when entry does not exist in the database"
"<p><strong>bold</strong> <em>italic</em> <code>code</code></p>"
"hsl(0,0%,0%, 0)"
"missing-file"
"link"
"<another>"
"nested/twice/start-page"
"processes footnotes in table cells"
"when the element src has an invalid file extension"
"design management is not enabled"
"custom"
"replaces users with links"
"rgba(0,0,0)"
"customizes the allowlist only once"
"handles merge request contextual commit references"
"returns a nokogiri doc"
"[["
"with Gitlab-hosted avatars in commit trailers"
"<code data-sourcepos="1:1-1:1">/quick</code>"
"when internal issue tracker is enabled"
"keeps html escaped text"
"retrieves field content using Banzai::Renderer.render_field"
"&lt;html&gt;"
"links to issue list when :label_url_method is not present"
"supports Unicode"
"#find_projects_for_hash_keys"
"links to the issue, but not to the designs tab"
"[[page name or url]]"
"when an item has a rendered field"
"?g.fm&"
"does not find label in ancestors"
"cross-project"
"#00ff00"
"javascript://alert(document.cookie);"
"span.gfm-color_chip"
"foo &lt;strike attr=&quot;foo&quot;&gt;&amp;&amp;amp;&amp;&lt;/strike&gt;"
"redacts the link if the user cannot read the project"
"#projects_hash"
"$1+\&2$"
"#{file_name_1}"
"when incomplete blockquote fences with multiple blocks are present"
"tanuki:tanuki:"
"&"
"adds rel and target attributes to improperly formatted protocols"
"with a project label"
"dk.png"
"::include{file=http://example.com/foo bar}"
"allows `br` elements"
"returns absolute paths when matched to an absolute path"
"section.footnotes"
"<pre lang="html"><code>"
"does not raise an exception on URIs containing invalid utf-8 byte sequences in context requested path"
"links to a valid group level work item with short reference"
"supports escaped Unicode filenames"
"encodes international domains"
"<p>Hello<br>World</p>"
"hsl(0,-1%,0%)"
"disallows `text-align` property in `style` attribute on other elements"
"turns off autolinking"
"does not require newlines at start or end of string"
"rgb(0,0,256)"
"http://example.com"
"hsl(1.1rad,0%,0%)"
"test $$`2+2`$$ test"
"returns an Array of commit ranges"
"links to valid absolute references of subgroup and group milestones"
"This gets a üëç"
"works for blobs"
"using an existing alert ID"
"invalid_no_doc.json"
"<img src="example.jpg" width="100%">"
"http://example.com/test.wav"
"returns an Array of feature flags"
"https://assets.example.com"
"does not detect action in code block"
"inside an "a" html tag"
"loads references grouped per parent path and absolute references"
"when include directive"
"truncates HTML properly"
">‚Ü©</a>"
"::include{file=file.md} "
"data-html"
"produces a good link"
"references with HTML entities"
"returns an empty Array when the commit range could not be found"
"target"
"when cross-project URL reference"
"<p><math>1+\{2</math></p>"
"asset proxy"
"returns safe HTML"
"when the method is redefined"
"does not support cross-project references"
"test-non-existing"
"displays inline code"
"makes only a single request to Gitaly"
"work_item"
"is empty when repo is invalid"
"cross-reference"
"#12345"
"mailto links"
"See ~"&lt;html&gt;""
"does not have N+1 per multiple references per project"
";;;"
"rgb(0,0,0,-0.0)"
"id"
"https://assets.example.com/d7d0c845cc553d9430804c07e9456545ef3e6fe6/68747470733a2f2f6578616d706c652e636f6d2f2323"
"Banzai::Filter::WikiLinkGollumFilter::IMAGE_LINK_LIMIT"
"#full_project_path"
"limits"
"toc"
"rewrites and replaces audio links names with white spaces to %20"
"allows `rel=license` in links"
"when private project repo with a valid commit"
"spec/fixtures/blockquote_fence_legacy_after.md"
"works for wikis"
"<a href="foo">foo</a>"
"data-author"
"data-table-markdown"
"Header 1-1-1"
"with "img" html tag"
"HEX format"
"performance"
"https://example.com/##"
"foo <strike attr="foo">&&amp;&</strike>"
"when given HTML is safe"
"![Name](/path/to/image.png)"
"with <script>console.log("pwded")<%2Fscript>.png"
"relative path with leading ./"
"with a valid username"
"recognizes math syntax"
"supports deprecated whitelist settings"
"an invalid inapplicable task list item"
"README.md"
"truncates text"
"skips when the skip_redaction flag is set"
"\1\2"
"with path to file in external storage"
"static properties"
"cross project shorthand reference"
"uninitialized constant Banzai::Pipeline::UnknownPipeline"
"hsl(1RAD,0%,0%)"
"smb:///Volumes/shared/bar.pdf"
"/a"
"does not replace if disabled"
"Description"
"foo [~] bar"
"issue"
"<p>$$$</p>"
"data-gollum"
"\n"
"links to a valid reference for cross-namespace in link href"
"does not have a polynomial regex"
"See ?g.fm&"
"when detecting footnotes"
"#R2R2R2"
"when milestone is closed"
"handles Gitaly timeout exceptions gracefully"
"inline math"
"when group milestone"
"$$20,000 and $$30,000"
"#call"
"enabled"
"has no tooltips for safe links"
"alt"
"Label ~c_bug\_ and _more_ text"
"returns true when nodes are loaded"
"when the element src has an audio extension"
"handles multiple styles in one text block"
"Google"
"when ref name contains percent sign"
"#find_for_paths"
"includes `js-render-suggestion` class"
"#{file_name}"
"<p><math>2+2</math> $22 and flightjs/Flight$22 <math>2+2</math></p>"
"adds a toolip with punycode"
"</a> [[page name or url]]"
"does limit"
"This is <a href="link" data-wikilink="true">a link</a>"
"returns a collection of objects"
"when GitLab is hosted at a relative URL"
"https://google.com/"
"handles invalid Group references"
"sanitizes reference HTML"
"fixed-top fixed-bottom"
"handles escaping brackets in title"
"allows references"
"links to a valid reference for cross-reference in link href"
"a-"
"with data-project"
"with "audio" html tag"
"adds merge request iid"
"#123456"
"style"
"This is the field"
"&lt;p&gt;Hello&lt;br&gt;World&lt;/p&gt;"
"xss &lt;img onerror=alert(1) src=x&gt;"
"<i>[[a|\"
"links are detected as malicious"
"¬©Ô∏è"
"String-based single-word references with special characters"
"<pre><code>This is a test</code></pre>"
"preserves footnotes defs"
"truncates to our size limits"
"removes non prefixed ids"
"t include a prohibited slug in a (..) relative link "
"images/image.jpg"
"returns the blob contents"
"d"
"https://assets.example.com/bcefecd18484ec2850887d6730273e5e70f5ed1a/687474703a6578616d706c652e636f6d"
"http://images.mydomain.com/test.png"
"rebuilds URL relative to the containing directory"
"when the link does not have a data-commit-range attribute"
"when markdown contains a reference to a merge request"
"links to a valid reference"
"generated IDs"
"<a data-foo="1"></a>"
"adds inline diff span tags for deletions when using square brackets"
"when for wikis"
"when the element src has a video extension"
"matches multiple same custom emoji"
"when link attributes contain malicious code"
"safe doc"
"when the href gets sanitized out"
"sanitizes the href attribute (case 2)"
"ignores non-issuable links"
"when filename in text is not same as in link"
"when the issue is not cross project"
"<pre><code>foo</code></pre>"
"cross-project URL reference"
"replaces a lazy loaded img src"
"does not replace link node with html"
"#collection_objects_for_ids"
"img"
"does not match enclosed colons"
"renders a label reference with emoji inside"
"media-container audio-container"
"replaces nomnoml pre tag with img tag if both kroki and plantuml are enabled"
"generates a color for the duration"
"valid include"
"data-reference-type="user""
"[Link to Header](start-page#title)"
"skips links with a "gfm" class"
"queries the collection directly"
"when reading a file in the repository"
"$$a!$$"
"b~~bug~~"
"ignores when attempting to reference a group with full path"
"when markdown contains font style transformations"
"when attribute syntax is invalid"
"ignores ref if commit is passed"
"excludes ImageLazyLoadFilter"
"gfm gfm-issue has-tooltip"
":tanuki: :tanuki: :tanuki:"
"replaces supported unicode emoji"
"when not all of uploads can be replaced"
"lib/kramdown/atlassian_document_format"
"https://www.gitlab.com"
"#gather_attributes_per_project"
"starts with two newlines to separate with actual commit message"
"renders a complex document"
"includes expected attributes"
"#section-1"
"does not detect action in blockquote"
"~"f \*bug\*""
"+s"
"does not create reference for a regular user for a private snippet"
"<p><code>$\$1+2$$</code></p>"
"when the link does not have a data-issue attribute"
"hsl(0,0%,0%,1)"
"skips node"
"[[a"
"table of contents nesting"
"<p>test</p>"
"when the link has a data-user attribute"
"data-snippet"
"does not autolink bad URLs after we remove trailing punctuation"
"links to the non-namespaced id"
"when replace_upload_links enabled"
"hsl(0,0,0%)"
"accepts a nil context"
"converts all escapable punctuation to literals"
"when issue with given ID does not exist"
"does not change the text"
"has an empty link if issue_path is invalid"
"tanuki"
"unrecognized syntax"
"returns a Hash containing projects grouped per parent paths"
"allows specific properties"
"data-math-style"
"links to a full-path reference"
"https://i.imgur.com/DfssX9C.jpg"
"html"
"gfm gfm-gollum-wiki-page"
"doc/some-file.md"
"Hello world :100:"
"when the link has a data-issue attribute"
"when the link does not have a data-commit attribute"
"ignores unicode versions of trademark, copyright, and registered trademark"
"nofollow"
"includes a data-reference-format attribute"
"lang="ruby:red""
"`code`"
"redacts links we should not have access to"
"preserves section anchor ids"
"doc/api/sample.md"
".call"
"replaces toc tag with ToC result"
"outputs escaped content"
"hsl(-1rad,0%,0%)"
"limits the number of filtered image items"
"creates a reference for a project member for an internal snippet"
"if no data-project or data-group attribute is present"
"$`2+2`$ $22 and flightjs/Flight$22 $`2+2`$"
"with valid syntax"
"preserves the original email used in the commit message"
"rewrites the link correctly"
"finds all unicode emoji codepoints with regex"
"returns the project from context"
"header text contains escaped content"
"hsl(+0,0%,0%)"
"[example](page slug)"
"without project reference"
"autolinks irc"
"replaces the link with filename in text & original filename, in strong"
"`$$1+2$$`"
"#{repository_upload_folder}/a.mp4"
"updates all nodes"
"when project with user namespace (no group)"
"START <span class="idiff left right deletion">something deleted</span> END"
"returns the nodes when the user is a member of the project"
"markdown link or image urls having spaces"
"http://xn--example-6p25f.com/</a>"
"source: chapter-1"
"truncates normally when limit specified"
"descendant-or-self::pre"
"enables debug output"
"#insert_after"
"Paragraph 1..."
"when markdown contains labels"
"<img src="example.jpg" width="200">"
"<img/>"
"https://gitlab.com/gitlab-org/gitlab/-/issues/478370"
"h2 a"
"handles Gitaly unavailable exceptions gracefully"
"trailers without emails"
"rgb(0,0,0,2)"
"$`2+2`$"
"markdown"
"when TanukiEmoji can not find the emoji"
"cross-project / same-namespace complete reference"
"does not modify relative URL with an anchor only"
"Some issue :eagle:"
"-1+10"
"without project repository access"
"includes only the content of the first 2 sources"
"width"
"#render"
"sanitizes tags that are not allowed"
"when using various schemes"
"files/images/ÌïúÍ∏Ä.png"
"not-exists.md"
"#render_field"
"returns an Array of labels"
"is not case-sensitive"
"fix"
"and src is an image"
"![proxy](http://exaüòÑmple.com/test.png)"
"does not have N+1 per multiple user references"
"updates all new nodes"
"#header"
"<a href="#{filename}">#{filename}</a>"
"for invalid urls"
"fast_spec_helper"
"50px"
"#one"
"---arbitrary"
"XSS prevention"
"mermaid"
""|x|x|x|x|x|\n-|-|-|-|-|\n|a|\n|a|\n|a|\n" * 6900"
"works and has correct data-sourcepos references"
"truncates the text if requested"
"a reference containing an element node"
"translates spaces to dashes"
"prevents xss by not replacing the same reference in one anchor multiple times"
"does not raise an exception on URIs containing invalid utf-8 byte sequences"
"open(/var/tmp/):%20/location%0Afrom:%20/test"
"inserts an element after a provided element"
"<p>test $<math>2+2</math>$ test</p>"
"video"
"$ a^2 $"
"hsl(0,0%,0%,0)"
"adds inline diff span tags for deletions when using curley braces"
"main-namespace"
"http://example.com:8000/"
"does not modify relative URLs in system notes"
"f *bug*"
"hsl(deg,0%,0%)"
"String-based multi-word references with special characters in quotes"
"another_group"
"GITLAB_TEST_FOOTNOTE_ID"
"loads the cache"
"does not add `has-tooltip` class"
"returns empty list of users"
"invalid include"
"keeps list levels regarding header levels"
"markdown engine from context"
"gfm gfm-commit has-tooltip"
"with RequestStore disabled"
"using a non-existing milestone ID"
"rdar://localhost.com/blah"
"removes info from a cross project reference"
"shows extended summary for references with +s"
"random text"
"<p>:+1:</p>"
"ignores invalid alert IDs"
"preserves code color scheme"
"https://assets.example.com/6d8b634c412a23c6bfe1b2963f174febf5635ddd/687474703a2f2f6578612546302539462539382538346d706c652e636f6d2f746573742e706e67"
"https://assets.example.com/2f29a8c7f13f3ae14dc18c154dbbd657d703e75f/68747470733a2f2f6578616d706c652e636f6d2f783fc2ac"
"when requested path is a directory with space in the repo"
"parse_sourcepos"
"/nonexistent/project"
"rewrites links (with spaces) with anchor"
"/path/audio.wav"
"creates a link"
"‚ù§Ô∏è"
"matches at the start of a string"
"allows references with text after the > character"
"contains issue-type as a data attribute"
"created link text will be link-text"
"links to the Group"
"$`22+1`$ and $`22 + a^2`$"
"1:1-1:4"
"table"
"links to a valid reference for issue reference in the link href"
"links to a valid short ID"
"rebuilds relative URL for a file in the repository root"
"#{xpath}"
"<p>This paragraph has a footnote.<sup>[<a id="_footnoteref_1" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></p>"
"Header 2-1"
"supports mentioning a single user"
"rewrites and replaces video links names with white spaces to %20"
"+"
"does not add inline diff span tags when the tags do not match"
"returns the nodes when the user can read the issue"
"has a data-name attribute"
"handles an empty ToC result"
"<a"
"[example]()"
"rebuilds relative URL for a missing file in the repo"
"does not escape the data-original attribute"
"#referenced_by"
"in group context"
"RGB format"
"does not add a project when the data-external-issue attribute is empty"
"adds the ref to the project refs cache"
"/path/my_video.somemp4"
"legacy math filter"
"includes the content of all sources"
"<code data-math-style="inline" class="code math js-render-math">"
"inline math using $`...`$ syntax"
"[second](http://example.com/slug two)"
"a.gfm"
"for merge request references"
"when pipeline_timing"
"does nothing with empty headers"
"detects"
"does not modify any relative URL in image"
"with project"
"removes unpermitted Group references"
"remove_unsafe_classes"
"#replace_link_node_with_href"
""{s}""
"returns an empty Array if the user can not read the group"
"ignores issuable links to specific comments"
"[~] foo <em>bar</em>"
"files/images/logo-black.png"
"does not raise an exception with a garbled path"
"add js-render to all math"
"~c_bug\_"
"when checking multiple work items on another project"
"http://]"
"ignores invalid feature flag IIDs"
"for links with a username"
"<a data-project="1" data-foo="2"></a>"
"<pre>foo</pre>"
"correctly encodes unicode to the URL"
"using an existing label ID"
"removes references for author"
"optimizes queries for elements with classes"
"returns an empty Array when the group has no users"
"backslash escapes"
"See gfm"
"with a custom regex"
"#{merge_request.id}"
"allows any User reference"
"group context"
"returns combined namespace and project ref"
"does not replace plantuml pre tag with img tag if disabled"
"rgb(0,0,0,.0)"
"shows punycode for autolinks"
":see_no_evil::hear_no_evil::speak_no_evil:"
"javascript:alert("foo");"
"<a data-reference-type="some_invalid_type"></a>"
"a good link reference"
"properly handles mixture with HTML comments and raw markdown"
"does not match an unknown emoji"
"uses gsub_with_limit"
"does not creates img tag if image does not exist"
"returns a list of Projects for a list of paths"
"<li><a href="#foo">Foo</a></li>"
"adds rel="noreferrer" to external links"
"cross-project shorthand reference"
"This is <a href="&lt;script&gt;alert(0)&lt;/script&gt;" data-wikilink="true">a link</a>"
"on content without front matter"
"backend"
"data-table-fields"
"<details>long text goes here</details>"
"http://gitlab.com/test.png?url=http://example.com/test.png"
"when limits math_rendering_limits_enabled is false"
"customizes the allowlist only once for different instances"
"t escape the "
"sets the reference type"
"result"
"noreferrer"
"adds them to the img"
"and ids_only is set to false"
"\"
"retrieves field content using Banzai::Renderer.cacheless_render_field"
"when checking multiple merge requests on another project"
"audio"
"hsl(rad,0%,0%)"
"removes invalid id for footnote links"
":tanuki: :tanooki:"
"returns an empty Array if the user can not read the project"
"complex_document.md"
"keeps spaces before and after"
"<p><math>2+2</math></p>"
"master"
"http://exa%F0%9F%98%84mple.com/test.png"
"processes markdown and does not surround output with a paragraph tag"
"when Gravatar is disabled"
"ignores open references"
"rescues the error"
"<p><math>1+\}2</math></p>"
"does not link any issue if it does not exist on GitLab"
"recognizes references"
"returns an Array of range objects"
"branch1"
"adds attachment icon class to the link"
"allows to use shorthand external reference syntax for Redmine"
"when `disable_all_mention` FF is enabled"
"suggestion"
"the filename contains invalid characters"
"with path to non-existing file"
"special names"
"$$[(a+b)c](d+e)$$"
"does not explode with an escaped null byte"
"autolink"
"returns an Array of milestones"
"smb:///Volumes/shared/foo.pdf"
"error"
"TableOfContents"
"<p><math>1+\$2</math></p>"
"h `bug`"
"Hello <b>world</b> :100:"
"hsl(0,0%,0%)"
"does not modify any relative URL in video"
"does not replace redacted reference with original content if href is given"
"gfm gfm-snippet has-tooltip"
"group_milestone"
"strong"
"supports an :only_path option"
"#redact"
"when reference not visible to user"
"<span data-escaped-char"
"<p>$ a^2 $</p>"
"using an existing merge request ID"
"rewrites non-file links (with spaces) to be at the scope of the wiki root"
"gracefully handles non-references matching the pattern"
"#{group_work_item.id}"
"rebuilds relative URL for a video in the repo"
"i a"
"fails fast for strings with many spaces"
"returns empty array"
"element <code>node</code> inside"
"https://example.com"
"when skip_project_check set to true"
"footnotes in tables"
"using a non-existing label ID"
"hsl(0,0%,0%, .0)"
"integration between parsing regular and external issue references"
"code highlight js-syntax-highlight mermaid"
"uses image data-src, malicious code does not execute as part of url"
"String-based multi-word references in quotes"
"includes a data-feature-flag attribute"
"See <html>"
"http://xn--"
"when the link has a data-merge-request attribute"
"References"
"One"
"does limit for blobs"
"when uploads_as_attachments is empty"
"title="http://example.com/evil%E2%80%AE3pm.exe""
"unicode keeps whitespace intact"
"<p>:tanuki:</p>"
"does not add a project when the data-commit attribute is empty"
"supports percent sign in filenames"
"unicode emoji is not replaced with tag"
"appends state to closed references"
"<span>text</span>"
"limits the number of filtered items"
"$1+\{2$"
"<p>[TOC]</p>"
"ignores the link"
"![example](img test.jpg)"
"# hi"
"replaces plantuml pre tag with img tag"
"ignores references with text before the @ sign"
"[[<em>TOC</em>]]"
"subclassing Banzai::Pipeline::BasePipeline"
"<p>/quick</p>"
"<pre><code>def fun end</code></pre>"
"page%20slug"
"-3+2"
"Content from wiki"
"[[page name or url]] [[page name or url]] [[page name or url]]"
"separated with a space"
"[first](slug one)"
"points to referenced project milestone page"
"when data-original attribute provided"
"#find_object"
"for issue references"
"<pre><code>"
"allows `class` on `a` elements"
"<span class="kc">true</span>"
"disallows the `name` attribute globally, allows on `a`"
"does not use pipeline timing check"
"returns a Hash containing range IDs per project"
"escapes the name attribute"
"data-commit-range"
"ignores checkbox on following line"
"removes id property for non-anchor links"
"fetches the data using a GET request"
"section-nav"
"same project / same group_label shorthand reference"
"uses a limited allowlist"
"ProjectWiki"
"hsl(0,101%,0%)"
"removes invalid id for footnote li"
"when cache is loaded"
"only allows http and https protocols"
"link has valid text"
"#initialize_reference_cache"
"gfm gfm-feature_flag has-tooltip"
"when all of uploads can be replaced"
";"
"when repository is passed into the context"
"irc://irc.freenode.net/git"
"something/cool"
"sanitizes the href attribute (case 1)"
"links with adjacent text"
"rebuilds absolute URL for a file in the repo"
"when named emojis"
"does not unescape HTML entities outside the link text"
"has a data-unicode-version attribute"
"does not raise an exception on invalid URIs"
"</math>"
"rgb(0,0,0,-0.1)"
"<pre data-canonical-lang="ruby"><code>This is a test</code></pre>"
"8634272"
"finds labels also in ancestor groups"
"<a href="http://example.com" data-wikilink="true" rel="nofollow noreferrer noopener" target="_blank">http://example.com</a></p>"
"source line position"
"ignores non-GFM links"
"inserts an element at the beginning when the provided element does not exist"
"queries the collection on the first call"
"<p><math>1/2</math> &lt;b&gt;test&lt;/b&gt;</p>"
"spec_helper"
"</span> [+added+]"
"encoding"
"created link text includes the resource text and wiki base path"
"Email: {{email}}"
"inexisting-project-id"
"height"
"happy_tanuki"
"a valid inapplicable task list item"
".gitkeep"
"links to the external tracker"
"does not raise timeout error"
"returns the nodes"
"when xhtml"
"hsl(0,0%,0%, 0.0)"
"#grouped_objects_for_nodes"
"is contained within a `ul` element"
"includes a data-snippet attribute"
"whitespace"
"does not replace plantuml pre tag with img tag if url is invalid"
"ignores merge request links to diffs tab"
"URL reference for a commit patch"
"HSL(0,0%,0%)"
"ignores internal references"
"uses custom emoji from ancestor group"
"block display math using $$\n...\n$$ syntax"
"when size attributes are valid"
"ignores invalid commit IDs on the referenced project"
"removes id property for non-user-content links"
"allows `text-align` property in `style` attribute on table elements"
"sanitize pipeline"
"requires project context"
"allows references for non confidential issues"
"rebuilds relative URL for audio in the repo"
"calls #can? for each project"
"li.inapplicable input[data-inapplicable]"
"hsl(0,0%,0)"
"[[http://example.com/image.jpg]]"
"properly adds the necessary ids and classes"
"<a class="gfm" href="https://www.gitlab.com" data-reference-type="issue">bar</a>"
"hello world"
"has valid color"
"allows non-url includes"
"converts common entities to their HTML-escaped equivalents"
"does not work for non-wiki/blob"
"recognizes file syntax"
"pipeline name defaults to :full"
"+++"
"<p><math>1+\&amp;2</math></p>"
"hsl(0, 0%, 0%)"
"#replace_text_when_pattern_matches"
"the reference is to a non-existant design"
"Consequatur aperiam et nesciunt modi aut assumenda quo id. "
"doc/sample.md"
"when linking internal images"
"Label ~"f \*bug\*" **with** more text"
"returns an Array of referenced projects"
"includes a data-merge-request attribute"
"ignores invalid label IDs"
"includes designs"
"#url_for_object"
"replaces placeholder when they are in an escaped link"
"<a href="http://example.com?name=%7B%7Bname%7D%7D">link</a>"
"rgb(0,0,0,0)"
"ignores the tag"
"[[wiki-slug]]"
"using a non-existing feature flag ID"
"See 2fa"
"<div class="gl-relative markdown-code-block js-markdown-code"><pre data-canonical-lang="ruby" class="code highlight js-syntax-highlight" v-pre="true"><code><span id="LC1" class="line" lang="">This is a test</span></code></pre><copy-code></copy-code><insert-code-snippet></insert-code-snippet></div>"
"contains a link to the merge request"
"legacy backslash handling"
"does not recognize as attributes"
"recognizes url syntax"
"when wiki_asciidoc_allow_uri_includes is false"
"when local image file exists"
"null byte"
"sanitizes tag attributes"
"redacts an Array of nodes"
"&lt;script&gt;alert(1);&lt;/script&gt;"
"not found"
"sanitizes `class` attribute from non-highlight spans"
"consecutive references"
"<p>$20,000 in $USD</p>"
"rebuilds relative URL for a file in the repo up one directory"
"referenced feature visibility"
"$1+2\$$"
"does not do N+1 query"
"when cross-project URL in link href"
"data-work-item-type"
"converts slug with spaces to a link"
"See %<html>"
"turns on minimal markdown options"
"e90decf88d8f96fe9e1389afc2e4a91f"
"<a href="_TOC_" data-wikilink="true">_TOC_</a>"
"#projects"
"caches objects on a per collection class basis"
"garbled path"
"returns the Project for a node"
"does not include a data-author attribute when there is no author"
"includes default classes, without tooltip"
"ignores invalid issue IDs"
"fails fast for strings with many `coding:`"
"ignores reference for shorthand cross-reference"
"returns a list of Projects"
"does not create a reference for guest for a public snippet"
"skips internal links"
"///example.com/test.png"
"This is [[a link|link]]"
"#{input}"
"generates the correct HTML"
"includes no `js-render-suggestion` when filter is disabled"
"license"
"Header 1-2"
"does not include designs in the extras"
"data-iid"
"includes data attributes for issuable popover"
"[+added+] [+added+] [+added+]"
"files/videos/intro.mp4"
"returns group ref"
"#{href}"
"<span"
"[data-math-style="display"]"
"#object_link_text_extras"
"<img class="plantuml" src="http://localhost:8080/png/U9npoazIqBLJ24uiIbImKl18pSd91m0rkGMq" data-diagram="plantuml" data-diagram-src="data:text/plain;base64,Qm9iIC0+IFNhcmEgOiBIZWxsbw==">"
"when public project repo with a valid commit"
"hsl(0,0%,0%,)"
"defaults to the GLFM_ENGINE"
"code"
"<pre lang="Êó•"><code>"
"<insert-code-snippet></insert-code-snippet>"
"d _bug_"
"Header 2"
"doc/api/README%.md"
"allows to use long external reference syntax for Redmine"
"<p><math>a!</math></p>"
"t include a prohibited slug in a (.) relative link "
"class"
"<p>[toc]</p>"
"wraps call method with a timeout"
"returns an empty Array when unauthorized"
"relative path"
"raises NoData"
"returns an Array of unique values"
"renders code"
"when requested path is a file in the repo"
"[x] foobar"
"[http://example.com](http://example.com)"
"#current_project_namespace_path"
"./"
"when the range has valid commits"
"http:example.com"
"2.500000_s"
"filters out HTML tags"
"links to a valid two-dot reference"
"when Gravatar is enabled"
""[](a)" * 190000"
"hsl(270,30%,50%)"
"feature proposal"
"adds project data attribute with project id"
"::include{file=missing.md}"
"http://exaüòÑmple.com</a>"
"allows `a` elements"
"RGB(0, 0, 0)"
"42"
"#header-1"
"rgba(0,0,0,1.)"
"when a project is public and the snippets feature is enabled for everyone"
"creates img tag for valid URL"
"#gather_references"
"replaces placeholder in text"
"#call_and_update_nodes"
"when markdown contains emojis"
"creates a reference for guest for a public snippet"
"https://gitlab.com/gitlab-org/gitlab/-/issues/447553"
"handles emojis and autolinking"
"for other types"
"with data-user"
"diagram.puml"
"$`[(a+b)c](d+e)`$"
"structure of a toc"
"wiki-slug"
":smile: using http://example.com"
"#cache_collection_render"
"ignores reference to all when the user is not a project member"
"/-/"
"adds `gfm-gollum-wiki-page` classes to the link"
"Êó•Êú¨Ë™û„ÅÆÊñáÂ≠ó„ÅåÂ§ß„Åç„ÅÑ"
"when the link has a data-author attribute"
"includes a title attribute"
"removes references for project members with guest role"
"when admin mode is disabled"
"rewrites links"
"_italic_"
"backslash escapes are untouched in code blocks, code spans, autolinks, or raw HTML"
"supports mentioning a group"
"has a namespaced id"
"all references"
"<a href="https://www.gitlab.com">Homer</a>"
"when reference visible to user"
"prepends a prefix to digits-only ids"
"file.md"
"API_32-12"
"mentioning a group"
"[[Something|unknown]]"
"gfm"
"<div>div</div><h1>h1</h1>"
"escapes RTLO and other characters"
"~"d \_bug\_""
"with html links"
"does nothing with non-link text"
"allows permitted Project references"
"main-project"
"when the link has a data-group attribute"
"returns the link"
"<div class="gl-relative markdown-code-block js-markdown-code"><pre data-canonical-lang="ruby" class="code highlight js-syntax-highlight language-ruby" v-pre="true"><code><span id="LC1" class="line" lang="ruby"><span class="k">def</span> <span class="nf">fun</span> <span class="k">end</span></span></code></pre><copy-code></copy-code><insert-code-snippet></insert-code-snippet></div>"
"does not convert other characters to literals"
"test `2+2`$ test"
"#records_for_nodes"
"$$$"
"<p data-sourcepos="1:1-1:14">[link](&lt;foo&gt;)</p>"
"allows `summary` elements"
"This is <a href="link" data-wikilink="true">&lt;script&gt;alert(0)&lt;/script&gt;</a>"
"String-based multi-word references that begin with a digit"
"outside an "a" html tag"
"does not append issue state"
"supports unescaped Unicode filenames"
"true"
"#{path}"
"redacts an external issue"
"`$1+2$`"
"linking to a milestone as the entire link"
"ignores reference to @all"
"<p><math>1+2\$</math></p>"
": is that ok?"
"rgb(255,255,255)"
"ignores invalid milestone names"
".reference_class"
":include{file=file.md}"
"works with empty text"
"inserts an element before a provided element"
"h"
"ignores out-of-bounds merge request IDs on the referenced project"
"ignores image alt and uses image path as the link text"
"$1+\#2$"
"matches"
"<table><tr><th>table head</th><tr><tr><td>table content</td></tr></table>"
"does not trigger a gitaly n+1"
"gollum tag filters"
"rgb(0,0,0,-.1)"
"does not detect a quick action in a code block"
"requires the pre to contain both code and math"
"pulls from the reference cache"
"<pre data-sourcepos="1:1-3:3" data-canonical-lang="plaintext"><code>This is a test</code></pre>"
"returns a Hash containing the issues for a list of nodes"
"</pre>"
"converts slug with spaces and a title to a link"
"A"
"when referenced project exists"
"does not make any Gitaly calls"
"<img src="example.jpg" width="100px">"
"includes the word "designs" after the reference in the text content"
"a video element"
"links to a valid group level work item with long reference"
"/uploads/ÌïúÍ∏Ä.png"
"returns an Array of issues"
"does not timeout with excessively long scheme"
"with cross-project / same-namespace complete reference"
"The quick brown fox jumped over the lazy dog twice"
"does not timeout with excessively long scheme and no link"
"absolute label references"
"display"
"when the file exists"
"#replace_link_node_with_text"
"hsl(0,100%,100%)"
"Foo1"
"for generated autolinks"
"color: red; border: blue; background: green; padding: 10px; margin: 10px; text-decoration: underline;"
"bar"
"hsl(0,0%,0%,.0)"
"does not change the HTML"
"returns referenceable and visible objects, alongside all and visible nodes"
"gathers the references for every node matching the reference type"
"returns a valid full cache key"
"#references_in"
"![a "
"table of contents tag not recognized"
"autolinks http"
"does not error when we add redaction to the pipeline"
"Foo"
"<h1>header</h1>{width=100}"
"math does not get rendered as link"
"data-src"
"prevents user-land html being injected"
"#{repository_upload_folder}/a.jpg"
"."
"has an empty link if issue_url is invalid"
"test lazy"
"with a URI that returns 404"
"This is [[&lt;script&gt;alert(0)&lt;/script&gt;|link]]"
"#123A"
"data-commit"
"returns a collection of id values without performing a db query"
"with path to a binary file"
"replaces name versions of trademark, copyright, and registered trademark"
"sanitizes `class` attribute on any element"
"hsl(0deg,0%,0%)"
"works with additional language parameters"
"hsl(0 deg,0%,0%)"
"<img src="example.jpg" width="100">"
""(.*?)""
"pre-processes the source text"
".//li//task-button"
"My image"
"language-yaml"
"This is [[a link|&lt;script&gt;alert(0)&lt;/script&gt;]]"
"skips ranges that could not be found"
"does detect a quick action"
"ignores images with empty data-src"
"when requested path is a directory in the repo"
"my_cache_key"
"::include{file=wiki.md}"
"when user has access to the project"
"rgb(0,0,0%)"
"hsl(1rad,0%,0%)"
"$1+\}2$"
"when label reference is similar to a commit SHA"
"# 1234"
"with a group label"
"link-text"
"[toc] as tag"
"includes content of the file"
"2"
"user-content-header"
"replaces placeholder when they are in a link"
"when the link has a data-external-issue attribute"
"returns an empty Array when the commit could not be found"
"converts a relative url into absolute"
"hsl(0,0%,0%,0.)"
"README.md#section"
"when incorrect syntax"
"complex_document.json"
"with [toc] as tag"
"#records_per_parent"
"leaves the document unchanged"
"random"
"abstract methods"
"sanitizes the fixed link"
"data-foo"
"HSLA(0,0%,0%)"
"returns the nodes if the user can read the project"
"adds a async decoding attribute"
"is not an XSS vector"
"does not create a reference for a regular user for a public snippet"
"replaces all links with original filename in strong"
"label span element"
"#12 34 56"
"mentioning @all"
"#anchor-10"
"ignores toc tag in inline code"
"for nil"
"123..456"
"replaces supported name custom emoji"
"doc/preface.md"
"unicode matches multiple emoji in a row"
"passes context to PostProcessPipeline"
"unicode matches with adjacent text"
"text"
"ignores invalid milestone IIDs"
"trailers prefixed with whitespaces"
"<div class="gl-relative markdown-code-block js-markdown-code"><pre class="code highlight js-syntax-highlight language-plaintext" v-pre="true"><code><span id="LC1" class="line" lang="plaintext">def fun end</span></code></pre><copy-code></copy-code><insert-code-snippet></insert-code-snippet></div>"
"returns an empty Array when the user could not be found"
"includes a data-project attribute"
"#r2r2r2"
"<p><code>$$1+2$$</code></p>"
"using an existing issue ID"
"ignores MAX_PIPELINE_SECONDS"
"relative path for a file up multiple directories"
"<pre data-mermaid-style="display">some code</pre>"
"a reference with work item type information"
"without a data-project attribute"
"when correct syntax"
"when filename in text is same as in link"
"returns escaped HTML"
"cool_group"
"when the link has a data-project attribute"
"truncates the text with multiple paragraphs"
"when reading content from a URL"
"#parent_from_ref"
"[example](page slug "title")"
"returns a Hash containing commit IDs per project"
"the effect of max-includes"
"Reference"
"has N+1 for multiple unique project/group references"
"object"
"td"
"does not replace plantuml pre tag with img tag if both kroki and plantuml are enabled"
"with a stale cache"
"test"
"fails fast"
"with [[_TOC_]] as tag"
"when merge requests belong to different projects"
"does not detect a quick action in raw html with a sourcepos"
"an external link with rel attribute"
"<p><math>1+\%2</math></p>"
"pipeline timing check"
"autolinks short URLs"
"expands when emoji appears multiple times"
"does not double-encode HTML entities"
"data-project-path"
"when project with group, default namespace settings"
"#collection_cache_key"
"returns the cache key for an ActiveRecord::Relation"
"when reference is a gollum wiki page link that is not visible to user"
"converts slug with spaces and a title to an image"
"calls Banzai::ReferenceRedactor to perform redaction"
"<s>foo <em>bar</em>\n</s>"
"#{invalid_link}"
"when multiple param delimiters are used"
"wraps the image with a link to the image src"
"has valid text"
"for confidential issues"
"data-external-issue"
"URL reference for a commit"
"text-align: right"
"<div class="gl-relative markdown-code-block js-markdown-code"><pre data-sourcepos="1:1-3:3" data-canonical-lang="plaintext" class="code highlight js-syntax-highlight language-plaintext" v-pre="true"><code><span id="LC1" class="line" lang="plaintext">This is a test</span></code></pre><copy-code></copy-code><insert-code-snippet></insert-code-snippet></div>"
"removes one closing punctuation mark when the punctuation in the link is unbalanced"
"does not detect action in paragraph if no sourcepos"
"when the link is inside a tag"
"HtTp"
"---"
"when the element src is an image"
"sub_group_milestone"
"&amp;"
"users.md"
"design management is not available"
"adds rel and target to improperly formatted mailtos"
"%3Cscript%3Ealert(0)%3C/script%3E"
"when links point to the relative wiki path"
"uses PostProcessPipeline"
"<p>hello</p>"
"when unknown"
"replaces the ID of the user"
"when footnotes exist"
"returns a full path for avatar urls"
">&lt;script&gt;alert(0)&lt;/script&gt;</a></p>"
"does not create reference for a regular user for a public snippet"
"with cross-project / cross-namespace complete reference"
"when GITLAB_TEST_FOOTNOTE_ID is set"
"preserves content inside code tags"
"async"
"[[http://example.com]] [[http://example.com]] [[http://example.com]]"
"<p>Content from wiki</p>"
"hsl(540,0%,0%)"
"foo-bar-kux"
"returns an empty Array when the group has mentions disabled"
"does nothing when :autolink is false"
"[~] foo <em>bar</em>\n<ol><li>sublist</li></ol>"
"<img src="example.jpg" height="100%">"
"doc/foo/bar/baz/README.md"
".filters"
"source position mapping"
"when asset proxy is configured"
"commit messages without trailers"
"<img src="http://localhost:8000/graphviz/svg/eNpLyUwvSizIUKhWSFTQtVNIUqjl0tdX8EutKFHIycxLVchJTStRyMwrSc0ryczPS8zJqVRIyknMy9bjAgArOBNq" class="js-render-kroki" data-diagram="graphviz" data-diagram-src="data:text/plain;base64,ZGlncmFwaCB7IGEgLT4gYiB9Ci8vIE5leHQgbGluZSBsZWZ0IGludGVudGlvbmFsbHkgYmxhbmsuCg==">"
"rebuilds relative URL for a file in the repo with an anchor"
"Text with `inline code`"
"See bug feature proposal technical debt"
"$`2+2`$ + $3+3$ + $$4+4$$"
"replaces existing label to a link"
"includes protocol when :only_path not present"
"#usernames"
"gfm gfm-project_member js-user-link"
"replaces reference node"
"data-wikilink"
"for references with fenced emoji"
"ignores invalid label names and escapes entities"
"replaces document node"
"returns the correct designs"
"<summary>summary line</summary>"
"$20,000 in $USD"
"ignores invalid merge IDs"
"enforces image limits"
"One<span>and</span>%E2%80%AEexe.mp3</a>"
"rebuilds relative URL for an image in the repo"
"Some:eagle:issue"
"includes a data-issue attribute"
"when no project was referenced"
"has not the .gfm class"
"unsupported pipeline name "label" (String)"
"rgba(0,0,0,0)"
"with an empty repository"
"uses the correct src"
"does not have N+1 for extended summary"
"<a>end text</a>"
"gif"
"and the html fragment does not contain any attributes"
"#project_for_node"
"returns an Array of commits"
"does nothing with an empty slug"
"#123456AA"
"doc/chapter-1.md"
"<span class="na">test</span>"
"<p>‚ù§Ô∏è</p>"
"http:\"
"links with adjacent html tags"
"an unchanged element"
"gfm gfm-issue"
"using a private project ID"
"_italic_ and `code`"
"hsl(-720,0%,0%)"
"included text"
".css"
"when group has members"
"does not recognize references in inline code"
"cross-project / cross-namespace complete reference"
"<a href="http://example.com?email={{email}}"">link</a>"
"for admin"
"replaces the link text with the milestone reference"
"project milestones"
".js-render-math"
"some <code>code</code> inside"
"ruby"
"data-name"
"L33t H@x0r"
"matches at the end of a string"
"when referencing both project and group milestones"
"design management is disabled"
"no N+1 queries"
"# 123"
"does not include trailing HTML entities"
"<a class="gfm" data-reference-type="issue">foo</a>"
"ignores locked merge request references"
"<a href="link">end text</a>"
"correctly uses the custom emoji URL"
"issue / work item references"
"::include{file=file two.md}"
"with a valid ref"
"pre"
"#1"
"<img>"
"with cache"
"#filter_item_limit_exceeded?"
""`a^2+b^2=c^2` + " * 56000"
"when markdown contains images"
"when using TanukiEmoji"
"when the element has height or width specified"
"for links that have `rel=license`"
".parse"
"![example](img test.jpg "title")"
"no project N+1 queries"
"allows references for assignee"
"c_bug_"
"for subgroups"
"adds `<task-button></task-button>` to every list item"
"formats duration"
"converts text in Atlassian Document Format"
"<blockquote data-sourcepos="1:1-1:1">/quick</blockquote>"
"table of contents"
"protects against malicious input"
"autolinks https"
"when markdown belongs to a field (non-blob)"
"This gets a :-1:"
"when properly configured"
"when data-canonical-src is empty"
"value"
"‚èØ :play_pause: ‚èØ :play_pause: ‚èØ :play_pause:"
"# 12345678"
"ignores invalid feature flag IIDs on the referenced project"
"preserves footnotes refs"
"replaces emoji"
"¬ÆÔ∏è"
"accepts link_attr options"
"#123"
"links with RTLO character"
"when the link has a data-snippet attribute"
"https://assets.example.com/6d8b63"
"This---header     is poorly-formatted"
"<pre data-canonical-lang="math" data-math-style="display" class="js-render-math"><code>"
"**bold** _italic_ `code`"
"<p>üëç</p>"
"rebuilds relative URL for a file in the repo"
"0:0-0:0"
"when content didnt change"
"[JIRA]{2,}-\\d+"
"[[images/image.jpg]]"
"using a non-existing snippet ID"
"skips relative links"
"http://gitlab.com/test.png"
"escapes the HTML entities"
"gfm gfm-merge_request"
"when including"
"decoding"
"adds a class attribute"
"when a project is public and the snippets feature is enabled for project team members"
"when subclassed from Text filter"
"attribute syntax"
"<p>some text</p>"
"#{work_item.id}"
"converts user reference with escaped underscore because of italics"
"‚èØ"
"returns the nodes if the user can read the group"
"when the method is not defined"
"$1+\%2$"
"spec/fixtures/blockquote_fence_legacy_before.md"
"caching"
"escapes HTML"
"does not add additional classes or attributes"
"code > span.gfm-color_chip > span"
"removes references for non project members"
"when cross-project URL reference with comment anchor"
"design management is disabled for the referenced project"
"page%20name%20or%20url"
"timesout and rescues in filter"
"when admin mode is enabled"
"returns proper inline sourcepos"
"for nested links on document"
"inserts an element at the end when the provided element does not exist"
" ::include{file=file.md}"
"includes a data-original attribute"
"Project"
"when for blobs"
"does not escape the space twice"
"returns current parent path when no group ref specified"
"<section class="footnotes" data-footnotes>"
"links to a valid reference for url cross-reference"
"https://example.com/some_file.md"
"is limited"
"when limiting how many elements can be marked as math"
"allows `abbr` elements"
"with a wiki"
"returns no value"
"disallows other properties in `style` attribute on `a` elements"
"with path to a textual file"
"math support"
"#1234"
"START <span class="idiff left right addition">something added</span> END"
"project that does not exist referenced"
"second"
"when `a` elements have `style` attribute"
"http://example.com/test.mp4"
"when link is not external or to a wiki"
"appends to the current class attribute"
"\"&amp;gt;bad things"
"foo"
"$22 and $2+2$"
"data-link"
"truncates HTML with emoji properly"
"skips projects without valid repositories"
"has the full group name as a title"
"does not unescape HTML entities in the link text"
"new nodes"
"noopener"
"when tag is link text and a page name or url"
"code block"
"#{project.id}"
"e*bug*"
"String-based single-word references that begin with a digit"
"#this-header-is-filled-with-punctuation"
"<p><math>22+1</math> and <math>22 + a^2</math></p>"
"ignores invalid snippet IDs"
"when fields are provided"
"uses the cache"
"sanitizes `class` attribute from all elements"
"when data-canonical-src is set"
"with RTLO character"
"using an existing snippet ID"
"data-feature-flag"
"Merged-By:"
"This is &lt;script&gt;alert(0)&lt;/script&gt; <a href="link" data-wikilink="true">a link</a>"
"does not call gitaly"
"""
"caches and returns the result"
"preserve unchanged"
"mentioning a nested group"
"<div class="gl-relative markdown-code-block js-markdown-code"><pre data-sourcepos=\"
"when no project with that path exists"
"creates img tag if image exists"
"merge_request"
"correctly modifies the img tag"
"when tag is only a page name or url"
"rebuilds relative URL for a directory in the repo"
"non/existent.file"
"does not detect a quick action"
"does not query previously queried objects"
"handles invalid references gracefully"
"#title-with-spaces"
"truncates to the default when limit is unspecified"
"adds js-render-math class to display math"
"when result is not available"
"when the element has no src attribute"
"<p><a class="with-attachment-icon" href="/path/to/image.png" target="_blank" rel="noopener noreferrer">Name</a></p>"
"hsl(0,0%,0%,1.0)"
"without a repository"
"HTML text with references"
"returns current parent path when no ref specified"
"rgb(0,0,0,0.0)"
"‚Ñ¢Ô∏è"
"cacheless object"
"when a document only has upload links"
"allows the `data-sourcepos` attribute globally"
"replaces redacted reference with original content"
"text @reference"
"rebuilds relative URL for an image"
"GITLAB_DISABLE_MARKDOWN_TIMEOUT"
"[data-math-style="inline"]"
"files/audio/sample.wav"
"https://example.com/x?¬¨"
"Some issue "
"includes a data-reference-format attribute for URL references"
"\"#{reference_link}"
"test1.jpg"
"saves records to cache"
"converts slug with spaces to an iamge"
"for sanitization of HTML entities"
"build the reference class"
"li"
"when Commit.reference_pattern causes a long scanning period"
"disallows other properties in `style` attribute on table elements"
"group milestones"
"#unique_attribute_values"
"and src is a video"
"data-alert"
"rgb(0,0,0,1)"
"with an "a" html tag"
":+1:üëç"
"recognizes file syntax with space"
"default allowlist"
"does not add `gfm-gollum-wiki-page` class to the link"
"#header-2"
"when both upload and repository links are present"
"when rendered_html is not memoized"
"edge cases"
"the link does not go to the designs tab"
"with space/"
" class="code highlight js-syntax-highlight language-plaintext" v-pre="true"><code></code></pre><copy-code></copy-code><insert-code-snippet></insert-code-snippet></div>"
"does not modify any relative URL in anchor"
"<p><math>20,000 and</math>30,000</p>"
"when wiki_asciidoc_allow_uri_includes is true"
"?"
"source: preface"
"[Link to Header](start page#title)"
"uses punycode for emails"
"ignores shorthanded issue reference"
"rgb(0, 0, 0)"
"shows title for references with +s"
"correctly encodes the URL"
"snake_case.svg"
"#{original_path}"
"invalid input"
"delimits on the first appearance"
"ignores non-HTTP(S) links"
"handles references from group scopes"
"#{elem}"
"preserves the commit trailer structure"
"does not change the url if it already absolute"
"#can?"
"when there is no current user set"
" "
"-1:2-3:-4"
"See gfm references"
"data-diagram"
"does nothing with empty text"
"document"
"does not redact an array of documents"
"Text with <code>inline code</code>"
"#cacheless_render"
"<pre lang="ruby"><code>def fun end</code></pre>"
"will not overflow the stack"
"returns a Hash containing records grouped per parent"
"uses specified reference class"
"ÌïúÍ∏Ä"
"./sample.md"
"inline math using $...$ syntax"
"replaces nomnoml pre tag with img tag if kroki is enabled"
"shows both title and state for closed references with +"
"/path/my_audio.somewav"
"wiki.md"
"autolinks multiple URLs"
"when project milestone"
"href="http://example.com/page""
"<a rel="license" href="http://example.com">rel-license</a>"
"gollum tag parsing"
"fails fast for strings with many newlines"
"link with trailing slash"
"has correct data attributes"
"does not expand when emoji is embedded mid-string"
"for group context"
"gfm has-tooltip"
"ignores toc tag when part of a sentence"
"includes a data-namespace-path attribute"
"returns the associated project if one was associated explicitly"
"_blank"
"#commit_range_ids_per_project"
"handles markdown inside a reference"
"when image src contains malicious code"
"a filter timeout"
"does not return users from the first call in the second"
"RGBA(0,0,0,0.7)"
"#"
"https://example.com/other_file.md"
":tanuki: (:happy_tanuki:)"
"RGBA(0,0,0)"
"does not convert an escaped reference"
"inline display math using $$...$$ syntax"
"<p>$22 and <math>2+2</math></p>"
"cross/reference"
"ignores absolute URLs with two leading slashes"
"[-{-"
"supports Unicode filenames"
"*"
"preserves the original name used in the commit message"
"#123 4"
"replaces the image tag with a video tag"
"only replaces trailer lines not the full commit message"
"[](page slug)"
"excludes the link if can_read_reference? returns false"
"when rendered_html is memoized"
"when linking external images"
"rewrites links with spaces in url"
"allows `data-math-style` attribute on `span`, code` and `pre` elements"
"does not rewrite links to old relative wiki path"
"returns a Hash containing all Namespaces"
"referenced project"
"[GitLab](https://gitlab.com)"
"cross-project reference in link href"
"[[_TOC_]]"
"adds inline span tags for additions  when using curley braces"
"<pre data-mermaid-style="display" data-canonical-lang="mermaid"><code class="js-render-mermaid">mermaid code</code></pre>"
"returns instances of issuables for nodes with references"
"<a href="http://example.com""
"a span"
"[https://example.com](https://example.com)"
"preserves a link href when link text is truncated"
"protects against malicious backtracking"
"invalid projects"
"when ref name contains special chars"
"yields valid references"
"wiki_page"
"when shorthand pattern #ISSUE_ID is used"
"<div class="gl-relative markdown-code-block js-markdown-code"><pre data-canonical-lang="gnuplot" class="code highlight js-syntax-highlight language-plaintext" v-pre="true"><code><span id="LC1" class="line" lang="plaintext">This is a test</span></code></pre><copy-code></copy-code><insert-code-snippet></insert-code-snippet></div>"
"allows permitted Group references"
"is not long running"
"<img src="http://localhost:8000/nomnoml/svg/eNqLDsgsSixJrUmtTHXOL80rsVLwzCupKUrMTNHQtC7IzMlJTE_V0KzhUlCITkpNLEqJ1dWNLkgsKsoviUUSs7KLTssvzVHIzS8tyYjligUAMhEd0g==" class="js-render-kroki" data-diagram="nomnoml" data-diagram-src="data:text/plain;base64,W1BpcmF0ZXxleWVDb3VudDogSW50fHJhaWQoKTtwaWxsYWdlKCl8CiAgW2JlYXJkXS0tW3BhcnJvdF0KICBbYmVhcmRdLTo+W2ZvdWwgbW91dGhdCl0=">"
"1"
"has the .gfm class"
"#{repository_upload_folder}/a.wav"
"when references_relation is not implemented"
"returns an Array of alerts"
"does not mangle the link text"
"converts multiple URLs"
"includes a data-author attribute when there is an author"
"excludes ServiceDeskUploadLinkFilter"
"#1234567"
"when invalid reference strings are very long"
"foobar"
"when it has more than one attachment to replace"
"<pre data-math-style="inline">some code</pre><div data-math>and</div>"
"when the link does not have a data-project attribute"
"mliteralcmliteral-"
"</code>"
"when :link_replaces_image is true"
"returns the relevant users of the group with enough access"
"renders and redacts an Array of objects"
"adds inline span tags for additions when using square brackets"
"https://foo.bar/happy.png"
"ignores code blocks that are not math"
"branch2"
"returns nil"
"transforms the image src to a data-src"
"data-reference-type"
"converts TOML frontmatter to a fenced code block"
"<p dir="auto">See <a href="unknown" data-wikilink="true">Something</a></p>"
"hsl(.1rad,0%,0%)"
"does not modify any relative URL in audio"
"when checking commits on another projects"
"casts String based IDs to Fixnums before querying objects"
"when merge request belongs to the private project"
"https://assets.example.com/08df250eeeef1a8cf2c761475ac74c5065105612/687474703a2f2f6578616d706c652e636f6d2f746573742e706e67"
"does not detect action in html block"
"page name or url"
"Some merge request"
"file two.md"
"See %"&lt;html&gt;""
"multi-line suggestions"
"link pattern"
"/nested/relative/gitlab"
"adds rel="noopener" to external links"
"works with external images"
"hsl(0,0%,0%,0.0)"
"hsl(0,0%,0%,2)"
"handles an empty pipeline result"
"This deserves a üé±, big time."
"contains work-item-type as a data attribute"
"adds data-math-style display attribute to display math"
"$20,000 and $30,000"
"#{repository_upload_folder}/a.test"
"does not autolink javascript"
"when lang is specified on `pre`"
"data-label"
"converts blockquote fences to blockquote lines"
"checking N+1"
"standard internal reference"
"removes trailing quotes"
"![proxy](http://example.com/test.png)"
"returns an Array of merge requests"
"ffaker"
"links to a User"
"Another issue"
"rewrites file links to be at the scope of the wiki root"
"includes a data-milestone attribute"
":smile:"
"<script>bad things</script>"
"returns the members of a project"
"replaces redacted reference with inner HTML"
"adds no-attachment icon class to the link"
"branch-merged"
"#{issue.id}"
"leaves other text content untouched"
"<ul class="section-nav">"
"cross-group absolute reference"
"#nodes_user_can_reference"
"creates a reference for a project member for a private snippet"
"executes :each_node only once for first reference filter"
"\‚Üí\A\a\ \3\œÜ\¬´"
"This is &lt;script&gt;alert(0)&lt;/script&gt; [[a link|link]]"
"allows allowlisted HTML tags from the user"
"#find_commits"
"<em>@test_</em>"
"ignores valid references when cross-reference project uses external tracker"
"does not link reference"
"links to a valid three-dot reference"
"display math"
"cool"
"returns the cache key for a Class"
"flightjs/Flight$22 and $$a^2 + b^2 = c^2$$"
"$2+2$"
"<img src="example.jpg" class="lazy" width="100">"
"with a relative URL root"
"returns the path of the current project namespace"
"with cross-project shorthand reference"
"<pre data-math-style="inline" class="js-render-math">some code</pre><div data-math>and</div>"
"~"a\~bug""
"referencing a label in a link href"
"includes no title attribute"
"<h1>test</h2"
"returns an empty Array"
"<pre>some code</pre><div data-math>and</div>"
"rebuilds relative URL for a file in the repo up multiple directories"
"iterates over the nodes in a document"
"<copy-code></copy-code>"
"subgroup_milestone"
"when json is invalid"
"truncates UTF-8 text by bytes, on a character boundary"
"ignores invalid commit IDs"
"<pre data-canonical-lang="math">something</pre>"
"HSLA(270, 30%, 50%, .7)"
"ul"
"Evil Test</a>"
"returns cacheless render field"
"[TOC]"
"//doc/api/README.md"
"with cross-project URL reference"
"[link](<foo\>)"
"allows `span` elements"
"wiki_file.md"
"does not detect GitLab users via a secondary email"
"when too many footnotes"
"handles group wiki links"
"does not include trailing punctuation"
"returns an Array when authorized"
"$a!$"
"rgb(0,0,-1)"
"when a link is detected"
"adds language to lang attribute when specified"
"Some issue"
"using an existing project ID where user does not have access"
"test $`2+2` test"
"return an empty array for paths that do not exist"
"contains an `li` element for each header"
"hsl(0DEG,0%,0%)"
"[missing.md](missing.md)"
"converts YAML front matter to a fenced code block"
"gfm gfm-design has-tooltip"
"ignores toc tag when at end of paragraph"
"#find_ranges"
"<p>:tm: :copyright: :registered:</p>"
"source: interwebs"
"<p>:heart:</p>"
"/doc/sample.md"
"element has correct data-lang-params"
"<pre data-mermaid-style="display" class="js-render-mermaid">some code</pre>"
"without cache"
"<p>‚Ñ¢ ¬© ¬Æ</p>"
"trailers in the form of *-by"
"autolinks ftp"
"escapes the data-original attribute on a reference"
"/uploads/data-src.png"
"when referencing both project and group milestones using absolute references"
"squeezes multiple spaces and dashes"
"points to the page defined in label_url_method"
"generates audio html structure"
"!"
"returns the nodes if the project attribute value equals the current project ID"
"does not create a reference for an external user for a public snippet"
"when mixed emojis"
"using a non-existing project ID"
"does not create a reference for a regular user for a private snippet"
"referencing a milestone in a link href"
"<code><span id="LC1" class="line" lang="ruby">"
"autolinks when using single_line pipeline"
"when markdown belongs to a blob"
"when the range does not have any valid commits"
"[[_toc_]]"
"replaces the image with link to image src"
"12:22-1:456"
"sup > a"
"when the link does not have a data-external-issue attribute"
"has-hyphen.jpg"
"rgba(0,0,0,)"
"preload"
"when reading a wiki blob"
"preserves original url in data-canonical-src attribute"
"instrumentation in render_result"
"skips cross project references if the user cannot read cross project"
"when delimiter is colon"
"../sample.md"
"sanitize link"
"adds hidden attribute when content size is large"
"includes the link if can_read_reference? returns true"
"https:example.com"
"when markdown contains links"
"http://about.gitlab.com/"
"renders non-HTML tooltips"
"does not include designs"
"renders original source when it is invalid JSON"
"when references_relation is implemented"
"when linking external resources"
"https://assets.example.com/a2e9aa56319e31bbd05be72e633f2864ff08becb/2f2f6578616d706c652e636f6d2f746573742e706e67"
"for protocol-relative links"
"links an internal issue  if it exists"
"2fa"
"replaces text with error"
"trailers that are inline the commit message body"
"when known"
"fails fast for long strings"
"links to a valid group level work item by URL"
"correctly escapes the ref"
"does not truncate if truncate_visible_max_chars not specified"
"specific states"
"References with html entities"
"returns a Hash containing all Projects"
"technical debt"
"includes trailing punctuation when part of a balanced pair"
"data-unicode-version"
"::include(file=file.md)"
"<p>flightjs/Flight$22 and <math>a^2 + b^2 = c^2</math></p>"
"does not change the link text"
"defaults to generating sourcepos"
"http://example.com _emphasis_ $x + y$"
"when absolute path namespace is provided instead of project"
"display math using ```math...``` syntax"
".render"
"with some spaces.png"
":tanuki:"
"<li data-sourcepos="1:1-1:1">/quick</li>"
"TimeoutTest"
"http://example.com/test.png"
"replaces them with mailto links"
"100"
"#F00"
"<p><gl-emoji"
"allows references for project members"
"an audio element"
"ignores invalid color code"
"with an up-to-date cache"
"#can_read_reference?"
"returns default namespace and project ref when namespace nil"
"if only_path is not false"
"foofoof..."
"expands emoji for references with +"
"escapes the title attribute"
"../../../api/README.md"
"returns the nodes if the attribute value equals the current project ID"
"#post_process"
"and ids_only is set to true"
"&quot;#{reference_link}"
"<code data-math-style="display" class="code math js-render-math">"
"span"
"does not unescape HTML entities"
"paragraph.md"
"does not check `can_read_reference` if the issue is not cross project"
"when project is the same"
"custom allowlist"
"%FF"
"invalid UTF-8 byte sequences"
"when it contains \\"
"does not modify absolute URL"
"has valid link text"
"-1"
"returns an Array of users"
"when linking internal resources"
"slug%20one"
"truncates a single long line of text"
"include..."
"when pattern matches in the last node"
"#nodes_visible_to_user"
"17817c73e368777e6f743392e334fb8a"
"../../sample.md"
"supports mentioning a project in a nested group"
"to a group upload"
"when project is in pending delete"
"renders not readable directive placeholder"
"cross-project / same-group_label complete reference"
"replaces the image tag with an audio tag"
"#12"
"Integer-based references"
"[[images/image.jpg]] [[images/image.jpg]] [[images/image.jpg]]"
"See bug, feature proposal, technical debt"
"design management is disabled for that project"
"mark%23\"
":-1:"
"returns an empty array"
"does not insert a table of contents"
"appends state to closed merge request references"
"/gitlab"
"gfm gfm-milestone has-tooltip"
"an internal reference"
"when work item belongs to a different group than the one from the context"
"does not match multiple emoji in a row"
"when the user cannot read cross project"
"#each_node"
"::include{file=https://example.com}"
"allows `data-table-*` attributes on `table` elements"
"issues"
"https://assets.example.com/648e074361143780357db0b5cf73d4438d5484d3/68747470733a6578616d706c652e636f6d"
"‚èØ :play_pause: "
"does nothing when limit is greater"
"works with inline images"
"<img src="example.jpg">"
"../README.md"
"#abc"
"a no-op filter"
"when using include in code segements"
"when image data-src contains malicious code"
"ignores invalid projects"
"#BAR"
"b[c"
"returns an Array of projects"
"John S. Doe"
"raises NotImplementedError"
"does not include protocol when :only_path true"
"https://assets.example.com/3368d2c7b9bed775bdd1e811f36a4b80a0dcd8ab/2f2f2f6578616d706c652e636f6d2f746573742e706e67"
"does not process links containing issue numbers followed by text"
"user-content-ÌïúÍ∏Ä"
"during initialization"
"gfm references"
"Header 1"
"the link goes to the designs tab"
"div"
"when checking multiple issues on another project"
"autolinks rdar"
"#commit_ids_per_project"
"renders a commit description and title"
"with http"
"/"
"../api/README.md"
"foofoofoofoofoofoofoofoofoofoo foofoofoofoofoof..."
"this <a href="_toc_" data-wikilink="true">_toc_</a>"
"replaces text"
"inserts a table of contents"
"limit keeps it from timing out"
"when link node has changed"
"is ignored"
"when project with group, no namespace settings"
"foo foo f..."
"document nodes"
"does not read the blob"
"when lang has extra params"
"https://assets.example.com/1b893f9a71d66c99437f27e19b9a061a6f5d9391/6f69676a7369653837383725242a2a2823282530"
"supports a special @all mention"
"[[http://example.com]]"
"when markdown is not enabled"
"sets the proper attributes for the image"
"skips links to issues within the same project"
"hsl(0,-0%,0%)"
"adds rel and target to improperly formatted autolinks"
"# Description"
"delegates the permissions check to the Ability class"
"100%"
"for symbols"
"[[_TOC_]] as tag"
"subclasses from IssueReferenceFilter"
"mixed matches multiple emoji in a row"
"parses cross-project references to regular issues"
"<ul>"
"when URI::InvalidURIError"
"removes any leading or trailing spaces"
"position: fixed"
"commit ref tag is valid"
"/path/my_image.jpg"
"allows at most N HTTP includes"
"does not allow url includes"
"is linear in the number of projects with design management enabled each design refers to"
"renders a milestone reference with emoji inside"
"does not have a N+1 query problem"
"does not wrap a duplicate link"
"http://google.com/"
"/doc/api/README.md"
".patch"
"1. [one](#fnref-abc)"
"allows correct footnote id property on links"
"<p data-sourcepos="1:1-2:3">/quick</p>"
"when checking commits ranges on another projects"
"includes a data-label attribute"
"when parsing default markdown"
"<p>test <code>2+2</code>$ test</p>"
"with an IDN character"
"does not add inline diff span tags when a closing addition tag is not provided"
"metadata"
"example"
"gfm gfm-work_item"
"defaults to add data-sourcepos"
"rgba(0,0,0,0.)"
"license.md"
"#issue_ids_per_project"
"redacts the link if the user cannot read the group"
"invalid URI"
"formatting a cherry-picked commit description html"
"#initialize_settings"
"/path/video.mp4"
"when attribute syntax is valid"
"[[link-text|http://example.com/pdfs/gollum.pdf]]"
"alpha code is not replaced with tag"
"skips text nodes in pre elements"
"media-container video-container"
"replaces the link with original filename in strong"
"[[http://example.com/image.pdf]]"
"g.fm & references?"
"data-reference-type="issue""
"videos and audio"
"<a href="http:\"
"generates new html"
"returns the content unmodified"
"ignores invalid issue IDs on the referenced project"
"inapplicable list items"
"when the link has a data-milestone attribute"
"when markdown contains a reference to an issue"
"ignores invalid label names"
"<p dir="auto">hello</p>"
"</gl-emoji> :tanuki:"
"1b12f15a11fc6e62177bef08f47bc7b5ce50b141"
"simple.png"
"when parent has only one node"
"returns an empty Array when the project could not be found"
"$22+1$ and $22 + a^2$"
"absolute project reference"
"multiline blockquotes"
"internal reference"
"when the link has a data-label attribute"
"does not process markdown"
"adds data-canonical-lang and removes lang attribute"
"removes the UTF8 BOM from the beginning of the text"
"<p>[[<em>TOC</em>]]</p>"
"with blocks"
"keeps image src unchanged, malicious code does not execute as part of url"
"moves the data-diagram* attributes"
"data-project"
"gfm-color_chip"
"inside back ticks will be exempt from linkification"
"does not recognize the toc"
"returns true if MAX_PIPELINE_SECONDS exceeded"
"links to valid references of subgroup and group milestones"
"data-design"
"#12G"
"user"
"a img"
"sample.md"
"gl-emoji"
"this%20%5Band%5D%20that"
"$1+\_2$"
"does not replace nomnoml pre tag with img tag if kroki is disabled"
"~"g\`bug\`" "
"calls #can? only once"
"/foo"
"when parent has multiple nodes"
"calls replace_and_update_new_nodes"
"returns commits by the specified ids"
"See 2 factor authentication"
"appends a unique number to duplicates"
"[[test|http://]]"
"title="http://xn--example-6p25f.com/test.png""
"<div class="gl-relative markdown-code-block js-markdown-code"><pre data-mermaid-style="display" data-canonical-lang="mermaid" class="code highlight js-syntax-highlight language-mermaid" v-pre="true"><code class="js-render-mermaid"><span id="LC1" class="line" lang="mermaid">mermaid code</span></code></pre><copy-code></copy-code><insert-code-snippet></insert-code-snippet></div>"
"fnref-1-"
"prepends the user message"
"#current_parent_path"
"when input is malicious"
"adds rel="nofollow" to external links"
"raise error if render not implemented"
"includes a data-reference-format attribute for extended summary URL references"
"foo/bar/"
"#namespaces"
"uses image alt as a link text"
"ignores them"
"returns false if MAX_PIPELINE_SECONDS not exceeded"
"returns an Array of the HTML nodes"
"src"
"calculates pipeline timing"
"data-meta="gem foo""
"Foo2"
"and protects against pathological number of emojis"
"when the blob does not exist"
"<p>$20,000 and $30,000</p>"
"123"
"properly adds tooltips to link for IDN images"
"when pattern matches in the first node"
"removes surrounding dollar signs and adds class code, math and js-render-math"
"li a"
"<p>Include this:</p>"
"hsl(0,0%,0%,-0.1)"
"same project / same group_label complete reference"
"hsla(0,0%,0%)"
"[toc]"
"gfm gfm-project has-tooltip"
":+1:"
"$2+2$ $22 and flightjs/Flight$22 $2+2$"
"autolinks images to the proxy"
"<span class="idiff">foo</span>"
"includes default classes"
"converts JSON front matter to a fenced code block"
"shows title for references with +"
"removes additional block level tags pre, p, img, ol, ul, and li"
"<p data-sourcepos="1:1-1:18"></p>"
"when GITLAB_DISABLE_MARKDOWN_TIMEOUT set"
"when no project was referenced in group context"
